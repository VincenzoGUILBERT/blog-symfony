{% extends 'base.html.twig' %}

{% block title %}User
{% endblock %}

{% block main %}

	<div class="user-profile-container">
		<div class="d-flex gap-2 align-items-center mb-5">
			<img class="user-profile-img" src="https://placehold.co/800x600" alt="">
			<div>
				<h1>{{ user.username }}</h1>
				<span>
					Member since
					{{ user.createdAt | date('d/m/Y') }}
				</span>
			</div>
		</div>

        <h2 class="mb-3">Top posts</h2>

		{% for post in posts | sort((a, b) => a.likes | length < b.likes | length) %}
			<article class="post-card">
				<img class="image" src="https://placehold.co/800x600" alt="">
				<div class="content">
					<header class="header">
						<div class="title">
							<h1>{{post.title | u.truncate(100, '...')}}</h1>
							{{ include('like/_like_button.html.twig', {type: 'post', entity: post}) }}
						</div>
						{{ include('post/_post_tags.html.twig') }}
					</header>
					<footer class="footer">
						<div class="author">
							<img class="author-image" src="https://placehold.co/400" alt="">
							<div class="username">
								<span>{{post.author.username}}</span>
								<span>Le
									{{post.createdAt | date("m/d/Y")}}</span>
							</div>
						</div>
						<div class="stats">
							<span>{{ post.comments | length }}
								Comments</span>
						</div>
					</footer>
				</div>
				<a class="post-link" href="{{ path('app_post_show', {'id': post.id}) }}"></a>
			</hr>
		</article>
	{% endfor %}

	{% if app.user and app.user.id == user.id %}
		<a href="{{ path('app_user_edit', {'id': user.id}) }}">edit</a>
		{{ include('user/_delete_form.html.twig') }}
	{% endif %}
</div>{% endblock %}
